<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>PROMarket ‚Äî Premium Service</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script>
        (function() {
            var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            if (isMobile || window.innerWidth < 768) {
                document.documentElement.classList.add('mobile');
            }
        })();
    </script>
    <!-- Leaflet CSS –∏ JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <!-- Particles.js, GSAP, Chart.js -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
    <div id="particles-js"></div>
    <div id="progress-bar"></div>

    <header>
        <div class="logo" onclick="showView('pros')" style="cursor: pointer;"><i class="fas fa-bolt"></i> PROMarket</div>
        <div class="search-bar">
            <i class="fas fa-search" style="color:#94a3b8"></i>
            <input type="text" id="main-search" placeholder="–ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–æ–≤..." autofocus oninput="debounce(getPros, 500)()">
        </div>
        <div style="display: flex; align-items: center;">
            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ –ü–ö) -->
            <div class="notification-badge" id="notificationBell" onclick="showNotifications()" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                <i class="fas fa-bell fa-lg"></i>
                <span class="badge hidden" id="notificationCount">0</span>
            </div>
            <div class="desktop-only">
                <div id="auth-zone">
                    <button class="btn btn-outline" id="authBtn" onclick="handleAuthAction()" title="–í–æ–π—Ç–∏ / –í—ã–π—Ç–∏">
                        <i class="fas fa-user-circle"></i> <span>–í–æ–π—Ç–∏</span>
                    </button>
                </div>
                <button id="compare-btn" class="btn btn-outline" style="margin-left:10px;" title="–°—Ä–∞–≤–Ω–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤">
                    <i class="fas fa-balance-scale"></i>
                </button>
                <button id="filter-toggle" class="btn btn-outline" style="margin-left:10px;" title="–§–∏–ª—å—Ç—Ä—ã">
                    <i class="fas fa-sliders-h"></i>
                </button>
                <button id="theme-toggle" class="btn btn-outline" style="margin-left:10px;" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <!-- –ö–Ω–æ–ø–∫–∞ –≥–∞–º–±—É—Ä–≥–µ—Ä —Å –±–µ–π–¥–∂–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
            <button id="menu-toggle" class="btn btn-outline" style="margin-left:10px;" title="–ú–µ–Ω—é">
                <i class="fas fa-bars"></i>
                <span id="hamburger-notif-count" class="badge hidden">0</span>
            </button>
        </div>
    </header>

    <div id="hamburger-menu" class="hamburger-menu hidden">
        <ul>
            <li onclick="showView('orders'); toggleHamburgerMenu()"><i class="fas fa-shopping-bag"></i> –ú–æ–∏ –∑–∞–∫–∞–∑—ã</li>
            <li onclick="compareMasters(); toggleHamburgerMenu()"><i class="fas fa-balance-scale"></i> –°—Ä–∞–≤–Ω–∏—Ç—å</li>
            <li onclick="handleAuthAction(); toggleHamburgerMenu()"><i class="fas fa-sign-in-alt"></i> <span id="menu-auth-text">–í–æ–π—Ç–∏</span></li>
            <li onclick="toggleTheme(); toggleHamburgerMenu()"><i class="fas fa-moon"></i> <span id="menu-theme-text">–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</span></li>
            <li onclick="toggleSidebar(); toggleHamburgerMenu()"><i class="fas fa-sliders-h"></i> –§–∏–ª—å—Ç—Ä—ã</li>
            <li onclick="showNotifications(); toggleHamburgerMenu()">
                <i class="fas fa-bell"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                <span id="menu-notif-count" class="badge hidden">0</span>
            </li>
            <li onclick="clearAllFavorites(); toggleHamburgerMenu()"><i class="fas fa-heart-broken"></i> –û—á–∏—Å—Ç–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</li>
            <li onclick="showStatistics(); toggleHamburgerMenu()"><i class="fas fa-chart-bar"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</li>
            <li onclick="randomMaster(); toggleHamburgerMenu()"><i class="fas fa-random"></i> –°–ª—É—á–∞–π–Ω—ã–π –º–∞—Å—Ç–µ—Ä</li>
            <li onclick="showAbout(); toggleHamburgerMenu()"><i class="fas fa-info-circle"></i> –û –ø—Ä–æ–µ–∫—Ç–µ</li>
        </ul>
    </div>

    <div class="app-container">
        <aside class="sidebar">
            <div style="display: flex; justify-content: flex-end; padding: 10px;">
                <button id="sidebar-close" class="btn btn-outline" style="padding: 8px 12px;">‚úï</button>
            </div>
            <div id="map" class="styled-map"></div>
            <div class="tabs-nav">
                <button class="tab-btn active" id="t-pros" onclick="showView('pros')">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã</button>
                <button class="tab-btn" id="t-orders" onclick="showView('orders')">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
            </div>
            <div class="filter-content">
                <!-- —Ñ–∏–ª—å—Ç—Ä—ã -->
                <div class="filter-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ª—É–≥</label>
                    <select id="f-cat" onchange="getPros()">
                        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        <option value="–†–µ–º–æ–Ω—Ç">üõ† –†–µ–º–æ–Ω—Ç</option>
                        <option value="–£–±–æ—Ä–∫–∞">üßπ –£–±–æ—Ä–∫–∞</option>
                        <option value="IT">üíª IT-—É—Å–ª—É–≥–∏</option>
                        <option value="–ö—Ä–∞—Å–æ—Ç–∞">‚ú® –ö—Ä–∞—Å–æ—Ç–∞</option>
                        <option value="–ü–µ—Ä–µ–µ–∑–¥—ã">üì¶ –ü–µ—Ä–µ–µ–∑–¥—ã</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥</label>
                    <select id="f-rate" onchange="getPros()">
                        <option value="0">–õ—é–±–æ–π</option>
                        <option value="4.5">–í—ã—Å–æ–∫–∏–π (4.5+ ‚òÖ)</option>
                        <option value="4.8">–≠–ª–∏—Ç–Ω—ã–π (4.8+ ‚òÖ)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (‚ÇΩ)</label>
                    <input type="number" id="f-price" placeholder="–õ—é–±–∞—è" oninput="getPros()">
                </div>
                <div class="filter-group">
                    <label>
                        <input type="checkbox" id="f-verified" onchange="getPros()"> –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ
                    </label>
                </div>
                <div class="filter-group">
                    <label>
                        <input type="checkbox" id="f-favorites" onchange="getPros()"> –¢–æ–ª—å–∫–æ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ
                    </label>
                </div>
                <div class="filter-group">
                    <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
                    <select id="f-sort" onchange="getPros()">
                        <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                        <option value="price_asc">–¶–µ–Ω–∞ (—Å–Ω–∞—á–∞–ª–∞ –¥–µ—à—ë–≤—ã–µ)</option>
                        <option value="price_desc">–¶–µ–Ω–∞ (—Å–Ω–∞—á–∞–ª–∞ –¥–æ—Ä–æ–≥–∏–µ)</option>
                        <option value="rating_desc">–†–µ–π—Ç–∏–Ω–≥ (—Å–Ω–∞—á–∞–ª–∞ –≤—ã—Å–æ–∫–∏–π)</option>
                        <option value="distance_asc">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–±–ª–∏–∂–µ)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <button class="btn btn-outline" onclick="resetFilters()" style="width:100%;">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                </div>
            </div>
        </aside>

        <main class="main" id="main-content">
            <div id="view-pros" class="view">
                <div id="pros-loader" class="loader hidden">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤...</div>
                <div id="pros-list" class="grid"></div>
                <div id="scroll-indicator" style="height: 3px; background: var(--primary); width: 0%; position: sticky; bottom: 0; left: 0;"></div>
            </div>
            <div id="view-orders" class="view hidden">
                <div id="orders-loader" class="loader hidden">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</div>
                <div id="orders-list" class="grid"></div>
            </div>
        </main>
    </div>

    <!-- –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->
    <div class="modal-bg" id="modal-auth">...</div>
    <div class="modal-bg" id="modal-booking">...</div>
    <div class="modal-bg" id="modal-notifications">...</div>
    <div class="modal-bg" id="modal-chat">...</div>
    <div id="compare-modal" class="modal-bg" style="display:none;">...</div>

    <div id="toast-container"></div>
    <button id="scrollTop" class="btn btn-primary" title="–ù–∞–≤–µ—Ä—Ö">‚Üë</button>

    <script src="client.js"></script>
</body>
</html>